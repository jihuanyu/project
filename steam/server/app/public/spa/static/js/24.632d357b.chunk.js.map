{"version":3,"sources":["components/BaseContent.jsx","webpack:///./src/page/role/style.less?5fda","page/role/style.less","page/role/style.module.less","HocComponent/withRef.js","page/role/index.jsx"],"names":["Content","BaseContent","react__WEBPACK_IMPORTED_MODULE_8___default","a","createElement","style","Object","_Users_liuyu_react_exam_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","background","padding","margin","marginBottom","borderRadius","this","props","React","Children","map","children","item","Component","content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","addModal","title","input","tool","roleList","menuTree","identityList","HocComponent_withRef","WrappedComponent","_class","_temp","_Component","withRef","classCallCheck","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","key","value","_this","objectSpread","ref","el","wrappedComponentRef","react_default","displayName","concat","name","TabPane","tabs","mapState","store","role","global","AddModal","connect","call","handleOk","console","log","refs","roleInput","dispatch","type","identity_text","then","setState","visible","handleCancel","CREATE","Symbol","MODIFY","state","modal","width","footer","es_button","size","onClick","bodyStyle","className","styles","placeholder","EditAuthorityApiModal","_this2","identity","RoleList","handleCreate","_this3","create","handleEdit","edit","handleChange","identity_id","onChange","_this4","dataSource","index","classNames","active","href","role_AddModal","component","defaultProps","ViewIdentity","e","target","_this5","view_authority_id","view_id","viewFromIdentity","flg","forEach","view_authority","data","_this6","getViewAuthorityId","id","es_checkbox","checked","isAuthority","text","_this7","getMenuTree","groupName","renderIdentityList","Identity","_ref","tab","role_ViewIdentity","Role","_this8","handleEditAuthorityApiModal","editAuthorityApiModal","handleChangeIdentity","_this9","table","_this10","Fragment","role_RoleList","role_Identity","role_EditAuthorityApiModal"],"mappings":"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","file":"static/js/24.632d357b.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport {Layout} from 'antd';\nconst {Content } = Layout;\n\nclass BaseContent extends Component {\n    render() {\n      return (\n        <Content style={{\n          background: '#fff', padding: 24, margin: 0, marginBottom: 20,\n          borderRadius: 10,\n          ...this.props.style\n        }}>\n          {React.Children.map(this.props.children,item=>item)}\n        </Content>\n      )\n    }\n}\n\nexport default BaseContent;\n\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-5-2!./style.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-5-2!./style.less\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-5-2!./style.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".role-list {\\n  border-right: 1px solid #eee;\\n  width: 300px;\\n  list-style: none;\\n}\\n.role-list ul {\\n  list-style: none;\\n  margin: 0;\\n  padding: 0;\\n  margin-right: 20px;\\n}\\n.role-list ul li {\\n  list-style: none;\\n  padding: 10px 20px;\\n  margin: 0;\\n  position: relative;\\n  border-bottom: 1px solid #eee;\\n  border-left: 5px solid #fff;\\n  transition: all 0.2s;\\n}\\n.role-list ul li .tool {\\n  position: absolute;\\n  top: 10px;\\n  right: 20px;\\n  display: none;\\n}\\n.role-list ul li:hover {\\n  background: #eee;\\n}\\n.role-list ul li:hover .tool {\\n  display: block;\\n}\\n.role-list ul li.active {\\n  background: #bccaff;\\n  border-left: 5px solid #0139FD;\\n}\\n\", \"\"]);\n\n// exports\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"addModal\":\"style_addModal__3cFe8\",\"title\":\"style_title__1lNF4\",\"input\":\"style_input__2LRrc\",\"content\":\"style_content__2K7wo\",\"tool\":\"style_tool__10Atq\",\"roleList\":\"style_roleList__hEaWi\",\"menuTree\":\"style_menuTree__13_Is\",\"identityList\":\"style_identityList__dsBJE\",\"item\":\"style_item__i86rk\"};","import React, {Component} from 'react'\n// 只做一件事，把`WrappedComponent`回传个`wrappedComponentRef`（如果有的话）\n\nexport default (WrappedComponent) => {\n  return class withRef extends Component {\n    static displayName = `withRef(${WrappedComponent.displayName || WrappedComponent.name || 'Component'})`;\n    render() {\n      // 这里重新定义一个props的原因是:\n      // 你直接去修改this.props.ref在react开发模式下会报错，不允许你去修改\n      const props = {\n        ...this.props,\n      };\n      // 在这里把wrappedComponentRef赋值给ref，\n      // 传给`WrappedComponent`，这样就wrappedComponentRef能获取到`WrappedComponent`实例\n      // 感谢评论区的[yangshenghaha]同学的完善\n      props.ref = (el)=>{\n        this.props.wrappedComponentRef && this.props.wrappedComponentRef(el);this.props.ref && this.props.ref(el);\n      }\n      return (\n        <WrappedComponent {...props} />\n      );\n    }\n  };\n};\n","import React, { Component } from 'react'\nimport { Button, Modal, Tabs, Checkbox } from 'antd'\nimport classNames from 'classnames';\nimport { connect } from 'dva'\nimport withRef from '@/HocComponent/withRef'\n\nimport {getMenuTree} from '@/config/router.config'\n\nimport BaseContent from '@/components/BaseContent'\n\nimport './style.less'\nimport styles from './style.module.less'\n\nconst TabPane = Tabs.TabPane;\nconst mapState = store => {\n  return { ...store.role, ...store.global }\n};\n\n/**\n * 新建modal\n * @prop {function} onCreateComplete - 新建成功时回调\n * @prop {function} onEditComplete - 编辑成功时回调\n * @method create - 新建\n * @method edit - 编辑\n */\n@connect(mapState)\n@withRef\nclass AddModal extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.type = {\n      CREATE: Symbol('create'),\n      MODIFY: Symbol('modify'),\n    };\n\n    this.state = {\n      type: this.type.CREATE,\n      visible: false\n    };\n  }\n\n  create() {\n    this.setState({\n      type: this.type.CREATE,\n      visible: true\n    });\n  }\n\n  edit() {\n    this.setState({\n      type: this.type.MODIFY,\n      visible: true\n    });\n  }\n\n  handleOk = () => {\n    console.log()\n    const value = this.refs.roleInput.value\n\n    this.props.dispatch({type: 'role/addRole', identity_text: value}).then(() => {\n      console.log('添加成功')\n    })\n    this.setState({\n      visible: false\n    });\n  }\n\n  handleCancel = (value) => {\n    console.log('取消')\n    \n    this.setState({\n      visible: false\n    });\n  }\n\n  render() {\n    return (\n      <Modal\n        visible={this.state.visible}\n        width={600}\n        footer={[\n          <Button size=\"large\" key=\"save\" type=\"primary\" onClick={this.handleOk}>确定</Button>,\n          <Button size=\"large\" key=\"cancel\" onClick={this.handleCancel}>取消</Button>,\n        ]}\n        bodyStyle={{\n          padding: '24px 80px',\n        }}\n      >\n        <div className={styles.addModal}>\n          <h2 className={styles.title}>\n            {\n              this.state.type === this.type.CREATE ? '创建新角色' : '修改角色名称'\n            }\n          </h2>\n          <div>\n            <input type=\"text\" ref='roleInput' className={styles.input} placeholder=\"请输入角色名称\" />\n          </div>\n        </div>\n      </Modal>\n    )\n  }\n}\n\n/**\n * 接口权限modal\n * @prop {function} onCreateComplete - 新建成功时回调\n * @prop {function} onEditComplete - 编辑成功时回调\n * @method create - 新建\n * @method edit - 编辑\n */\n@connect(mapState)\n@withRef\nclass EditAuthorityApiModal extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      visible: false,\n      identity: {}\n    };\n  }\n\n  edit (identity) {\n    console.log(identity)\n    this.setState({\n      visible: true,\n      identity: identity\n    });\n  }\n\n  handleOk = () => {\n    const value = this.refs.roleInput.value\n\n    this.props.dispatch({type: 'role/addRole', identity_text: value}).then(() => {\n      console.log('添加成功')\n    })\n    this.setState({\n      visible: false\n    });\n  }\n\n  handleCancel = (value) => {\n    console.log('取消')\n    \n    this.setState({\n      visible: false\n    });\n  }\n\n  render() {\n    const {identity_text} = this.state.identity\n    return (\n      <Modal\n        visible={this.state.visible}\n        width={600}\n        footer={[\n          <Button size=\"large\" key=\"save\" type=\"primary\" onClick={this.handleOk}>确定</Button>,\n          <Button size=\"large\" key=\"cancel\" onClick={this.handleCancel}>取消</Button>,\n        ]}\n        bodyStyle={{\n          padding: '24px 80px',\n        }}\n      >\n        <div className={styles.addModal}>\n          <h2 className={styles.title}>\n            设置{identity_text}接口权限\n          </h2>\n          <div>\n            \n\n          </div>\n        </div>\n      </Modal>\n    )\n  }\n}\n\n/**\n * 角色列表展示\n */\nclass RoleList extends Component {\n  static defaultProps = {\n    dataSource: [],\n    identity_id: ''\n  }\n\n  handleCreate = () => {\n    // console.log(this.addModal)\n    this.addModal.create()\n  }\n\n  handleEdit = () => {\n    this.addModal.edit()\n  }\n\n  handleChange = (identity_id) => {\n    this.props.onChange(identity_id)\n  }\n\n  render () {\n    const {dataSource} = this.props\n    return (\n      <div className='role-list'>\n        <ul>\n          {dataSource.map((item, index) => (\n            <li key={index} onClick={() => this.handleChange(item.identity_id)} className={classNames({\n              active: this.props.identity_id === item.identity_id\n            })}>\n              <div>\n                <h3>{item.identity_text}</h3>\n                <p>{item.identity_id}</p>\n              </div>\n              <div className=\"tool\">\n                  <a href=\"javascript:;\">删除</a>\n                </div>\n            </li>\n          ))}\n          <li>\n            <a href=\"javascript:;\" onClick={this.handleCreate}>添加角色</a>\n          </li>\n        </ul>\n        <AddModal wrappedComponentRef={(component) => this.addModal = component} />\n      </div>\n    )\n  }\n}\n/**\n * 视图权限展示\n */\n@connect(mapState)\nclass ViewIdentity extends Component {\n\n  isAuthority (view_id) {\n    const {viewFromIdentity} = this.props\n    let flg = false;\n    viewFromIdentity.forEach(item => {\n      if (item.view_id === view_id) {\n        flg = true\n      }\n    })\n    return flg\n  }\n\n  getViewAuthorityId (view_id) {\n    const {view_authority} = this.props\n    let view_authority_id = '';\n    view_authority.forEach(item => {\n      if (item.view_id === view_id) {\n        view_authority_id = item.view_authority_id\n      }\n    })\n    return view_authority_id\n  }\n\n  handleChange = (e) => {\n    // const {viewFromIdentity} = this.props\n    // console.log(viewFromIdentity)\n    // console.log(e.target)\n    console.log(e.target)\n    this.props.dispatch({\n      type: 'role/setIdentityView',\n      view_authority_id: e.target.value,\n      identity_id: this.props.identity_id\n    })\n\n  }\n\n  renderIdentityList (data) {\n    return (\n      <ul className={styles.identityList}>\n        {data.map((item, index) => (\n          <li key={index} className={styles.item}>\n          {console.log(this.getViewAuthorityId(item.id), item.id, 'iddddddddd')}\n            <Checkbox checked={this.isAuthority(item.id)} value={this.getViewAuthorityId(item.id)} onChange={this.handleChange}>{item.text}</Checkbox>\n          </li>\n        ))}\n      </ul>\n    )\n  }\n\n  render () {\n    const menuTree = getMenuTree()\n    \n    return (\n      <div>\n        {menuTree.map((item, index) => {\n          return (\n            <div className={styles.menuTree} key={index}>\n              <h4 className={styles.title}>{item.groupName}</h4>\n              {this.renderIdentityList(item.children)}\n            </div>\n          )\n        })}\n        \n      </div>\n    )\n  }\n}\n\nconst Identity = ({identity_id}) => {\n  return (\n    <Tabs>\n      <TabPane tab=\"视图权限\" key=\"1\">\n        <ViewIdentity identity_id={identity_id} />\n      </TabPane>\n      <TabPane tab=\"接口权限\" key=\"2\">Content of tab 2</TabPane>\n    </Tabs>\n  )\n}\n\n/**\n * 角色列表展示\n */\n@connect(mapState)\nclass Role extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      identity_id: ''\n    }\n    console.log(this.props)\n  }\n\n  componentDidMount() {\n    this.props.dispatch({ type: 'role/fetch' }).then(() => {\n      this.setState({\n        identity_id: this.props.table.data[0].identity_id\n      })\n      this.props.dispatch({type: 'role/getViewFromIdentity', identity_id: this.state.identity_id})\n    })\n    \n  }\n\n  handleCreate = () => {\n    // console.log(this.addModal)\n    this.addModal.create()\n  }\n\n  handleEdit = () => {\n    this.addModal.edit()\n  }\n\n  handleEditAuthorityApiModal = (identity) => {\n    this.editAuthorityApiModal.edit(identity)\n  }\n\n  addRole () {\n    \n  }\n\n  // 切换角色\n  handleChangeIdentity = (identity_id) => {\n    console.log(identity_id)\n    this.setState({\n      identity_id\n    }, () => {\n      this.props.dispatch({type: 'role/getViewFromIdentity', identity_id})\n    })\n  }\n\n  render() {\n    const { table } = this.props\n    const { identity_id } = this.state\n    return (\n      <BaseContent>\n        <React.Fragment>\n          <div className={styles.content}>\n            <RoleList dataSource={table.data} identity_id={identity_id} onChange={this.handleChangeIdentity} />\n            <div className={styles.tool}>\n              <Identity identity_id={identity_id} />\n            </div>\n          </div>\n        </React.Fragment>\n        \n        <EditAuthorityApiModal wrappedComponentRef={(component) => this.editAuthorityApiModal = component} />\n      </BaseContent>\n    )\n  }\n}\n\nexport default Role\n"],"sourceRoot":""}